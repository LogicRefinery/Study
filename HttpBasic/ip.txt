IP ( 인터넷 프로토콜 ) 
아이피는 인터넷에 연결된 컴퓨터의 고유 주소이다. 각 컴퓨터가 집이고 그 주소가 IP 이다.
데이터를 전달할 때 이 IP 주소를 가지고 특정 컴퓨터와 데이터를 교신할 수 있으며 이 때 사용되는 데이터를 전송하는 단위를
IP 패킷이라고 한다.

IP패킷
패킷을 택배라고 생각하자. 택배에는 보내는사람(IP), 받는사람의 정보(IP)로 발송되며 박스안에는 데이터가 들어있다.
이러한 정보가 입력된 패킷을 인터넷 망에 던지면 정해진 규칙과 노드에 의해 패킷은 목적지에 도달한다.

패킷은 항상 같은 노드를 타고가는게 아니라 망의 사용 여부에따라 최적의 길을 찾아간다.
패킷은 용량이크면 패킷을 나누어서 전송한다.


IP 프로토콜의 한계

비연결성
패킷을 받을 대상이 없거나 서버가 꺼져있어도 무조건 전송함.

비신뢰성
중간에 패킷이 사라지거나, 쪼개어 보낸 패킷들이 순서대로 도착하지 않을 수 있다.

멀티 태스킹 시 각 애플리케이션을 구분 하기 힘듦

위 문제들을 해결해주는것이 TCP 이다.

TCP ( 전송제어 프로토콜 ) Transmission Control Protocol
출발지 포트, 목적지 포트, 전송제어, 순서, 검증 정보 등등 을 입력하여 데이터를 한번 감싼다.

특징
1. 연결 지향, 목적 서버와 연결이 됐는지 확인 후 데이터를 전송한다.
2. 데이터 보증, 데이터 전송 중 소실된 데이터를 확인할 수 있다.
3. 순서 보장, 패킷을 나누어 보냈더라도 순서를 기입해서 보내기 떄문에 데이터가 꼬일일이 없다.

연결지향
3 way handshack ( TCP 연결 과정 )
1. A 서버에서 데이터 통신을 원하는 서버 B 에 신호를 보낸다. ( SYN ) 내신호 받았냐?
2. B 서버에서 답변 + 신호를 보낸다. ( ACK ) ㅇㅇ 받았음 + ( SYN ) 내신호 받았냐?
3. A 서버에서 B서버에 답변을 보낸다. ( ACK )

데이터를 주고받을 서버끼리 서로 신호를 보내서 연결을 확인한다.
SYN 은 싱크로나이즈의 약자, ACK는 엑세스오케이 줄임말같은데.. ㅎㅎ

SYN : 접속 요청
ACK : 요청 수락

위 과정을 거친 후 데이터 전송 시작. 위 연결 과정중 문제가 생기면 데이터 전송안함.

데이터 보증
1. A 서버에서 B 서버에게 데이터를 전송
2. B 서버에서 A 서버에서 상태값을 전송

순서 보장
1. A 서버에서 B 서버로 패킷들을 보냄
2. A 서버가 전송한 패킷 순서가 1,3,2 와 같은식으로 꼬여서 B 서버에 도착하면 B 서버는 A 서버에게 2번부터 다시 보내라고함
3. A 서버는 신호를 보고 다시 데이터 전송

TCP/IP 패킷의 정보
ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
|  IP : 출발지IP, 목적지IP                 |
| ------------------------------------- |
| | TCP : 출발PORT, 목적PORT, 전송제어    | |
| | 순서, 검증정보 ..                    | |
| | ----------------------------------| |
| |  전송 데이터                         | |
| |                                   | |
ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ

전송데이터를 TCP 정보로 감싸고 다시 IP 정보로 감싼다. 패킷을 받은 서버는 각각 계층에서 정보를 얻은 후 정보통신을 한다.

UDP
IP와 거의 같다. PORT, 체크섬 정도만 있음. 기능이 없어서 통신이 빠르다.

PORT ( 항구 )
내 PC 가 게임도하구, 음악도듣구, 메시지도 받는다면, 수많은 데이터 패킷들이 내 PC로 도착한다.
게임 데이터는 게임으로, 음악 데이터는 음악으로, 메시지 데이터는 메신저로 분류가 되어야 하는데 이 때
이것을 분류하는 기준이 바로 포트이다.

0 ~ 1023 : 잘알려진 포트, 사용하지 말자

FTP : 20, 21
HTTP : 80
HTTPS : 443
Mysql : 3306

이러면 각 애플리케이션이 통신한 데이터들을 분류할 수 있다.

1023 ~ 65535 할당 가능

DNS ( 도메인 네임 시스템 )
1.IP 는 사람이 외우기 어렵다.
2.IP 는 변경될 수 있다.
IP주소로 다른 서버를 찾기 어려운이유는 위와 같다. 그래서 DNS가 존재한다.

1.도메인을 구입한다.
2.DNS 서버에 도메인을 등록하고 IP와 연결한다.
3.웹브라우저에서 도메인으로 검색시 DNS 서버에서 대응되는 IP를 응답해준다.
4.IP가 변경되면 DNS 서버의 대응되는 IP를 변경한다.

DNS로 IP의 단점 두 가지를 모두 해결할 수 있다.

인터넷 계층구조
애플리케이션 -> OS -> TCP/IP -> 물리




TCP/IP
TCP/IP란 컴퓨터와 컴퓨터간 네트워크에서 원할한 통신을 가능하도록 하기 위한 프로토콜(통신규약)이다.

TCP(Transmission Control Protocol) 
개념
네트워크에서 데이터 전달을 관리하는 규칙이다.
데이터를 전송할 때 패킷 단위로 나누어 보내고, 수신지에서 이를 다시 조립하여 원래 데이터로 만드는 규칙이다.
TCP는 패킷을 조립하고, 손실된 패킷을 확인하고, 재전송하도록 요청하는 기능을 한다.
데이터를 패킷 단위로 나누어 보내는 이유? 
하나의 데이터를 통채로 전송하면 라우터 이동간에 데이터가 손실될 경우가 있다.
이 경우에는 데이터 손실이 일어나도, 수신지에서는 확인할 방법이 없다.
패킷 단위로 데이터를 나누어 보내면 패킷마다 전체 패킷수를 입력하여 전송하기 때문에 수신지에서 패킷 유실을 확인 할 수 있다.
IP(Internet Protocol) 
개념 
네트워크 상에서 데이터 전송을 위해 컴퓨터의 위치를 나타내는 규약이다.
기존에 사용하던 방식인 IPv4 - 32bit에서 주소공간에 대한 우려로 IPv6 - 128bit가 등장했다.
TCP/IP 4계층 
개념 
OSI(Open Systems Interconnections) 7계층은 시스템들의 연결을 위한 모델이다. TCP/IP 4계층은 이를 웹 서비스에 맞게 단순화한 모델이다.

TCP:IP 4 layer

응용 계층(Application Layer) 
응용프로그램들이 네트워크서비스, 메일서비스, 웹서비스 등을 할 수 있도록 표준적인 인터페이스를 제공한다.
네트워크를 사용하는 응용프로그램으로 이루어진다.
TCP/IP 기반의 응용 프로그램을 구분할 때 사용한다.
프로토콜 : HTTP, FTP, Telnet, DNS
전송 계층(Transport Layer) 
시스템을 연결하고 데이터를 전송하는 역할을 한다.
시스템의 논리주소와 포트를 가지고 있어서 상위 계층의 프로세스를 연결해서 통신한다.
정확한 패킷 전송이 보장이 필요할 때는 TCP를 사용하고, 패킷의 정확성보다는 빠른 속도의 전송이 필요한 멀티미디어 통신에서는 UDP를 사용한다.
통신 노드 간의 연결을 제어하고, 자료의 송수신을 담당한다.
프로토콜 : TCP, UDP
인터넷 계층(Internet Layer) 
데이터를 정의하고 데이터의 경로를 라우팅한다.
전송 계층으로 부터 받은 데이터에 IP패킷 헤더를 붙여 IP패킷을 만들고 이를 전송한다.
통신 노드 간의 IP 패킷을 전송 및 라우팅 기능을 담당한다.
프로토콜 : IP, ARP, RARP
네트워크 액세스(Network Access Layer) 
OS의 네트워크 카드와 디바이스 드라이버 등과 같이 하드웨어적인 요소와 관련되 는 모든 것을 지원하는 계층이다.
CSMA/CD, MAC, LAN, 패킷망 등에 전송에 사용된다.
프로토콜 : Ehternet(이더넷), Token Ring, PPP
데이터 통신 과정 
클라이언트가 특정 URL로 요청한다.
DNS에서 IP주소를 받아와 Application Layer에서 HTTP 메세지를 작성한다.
Tranpoot Layer에서 HTTP 메세지를 패킷으로 나눈다.
Internet Layer에서 IP주소를 이용하여 전송 위치를 확인한다.
네트워크를 통해서 패킷을 전송한다.
서버에서 정상적으로 패킷을 수신했다면, 같은 방식으로 클라이언트에게 응답한다.

URI와 웹 브라우저 요청 흐름
URI (Uniform Resource Idenrifier)
Uniform : 리소스를 식별하는 방식
Resource : 자원, URI로 식별할 수 있는 모든 것 (제한 없음)
Idenrifier : 다른 항목과 구분하는데 필요한 정보

URL ( Uniform Resource Locator ) 리소스의 위치
URN ( Uniform Resource Name ) 리소스의 이름

URL : example.com:8042/over/there?name=ferret#nose
URN : example:animal:ferret:nose

URN은 거의 안씀

URI 는 URL과 URN을 포함한 것, URN 은 안쓰니까
URI == URL 이라고 봐도 무방하다.

URL
scheme://[userinfo@]host[/path][?query][#fragment]
https://wwww.google.com:443/serach?q=hello&hl=ko

scheme : 주로 프로토콜 입력, 프로토콜 : 어떤 규약으로 자원에 접근할 것인지.
ex) http, https

userinfo : 거의 안씀
host : 도메인명, IP주소
port : port 생략시 http 는 80, https 는 443 자동입력
path : 리소스 경로, 디렉토리 구조형식/계층적 구조
query : key=value 형식 ?로 시작, &로 추가 가능
query parameter, query string 등으로 불림
서버에 전송하는 변수, 문자 형태로 전송돼서 위와같이 불림
fragment : html 내부 북마크 등에 사용, 서버에 전송되는 정보는 아님 잘 사용안함
